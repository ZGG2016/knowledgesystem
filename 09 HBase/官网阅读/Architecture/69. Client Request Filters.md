# 69. Client Request Filters

[TOC]

> [Get](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Get.html) and [Scan](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Scan.html) instances can be optionally configured with [filters](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/Filter.html) which are applied on the RegionServer.

Get 和 Scan 实例可以可选地配置过滤器，应用在 RegionServer 上。

> Filters can be confusing because there are many different types, and it is best to approach them by understanding the groups of Filter functionality.

过滤器有多种不同的类型。最好是通过理解过滤器功能组来接近它们。

## 69.1. Structural

> Structural Filters contain other Filters.

结构过滤器包含其他过滤器。

### 69.1.1. FilterList

> [FilterList](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/FilterList.html) represents a list of Filters with a relationship of FilterList.Operator.MUST_PASS_ALL or FilterList.Operator.MUST_PASS_ONE between the Filters. The following example shows an 'or' between two Filters (checking for either 'my value' or 'my other value' on the same attribute).

FilterList 是多个过滤器的列表，在这些过滤器两两个间具有 `FilterList.Operator.MUST_PASS_ALL` `FilterList.Operator.MUST_PASS_ONE` 关系。

下面的示例展示了两个过滤器间的 'or' 关系(在同一个属性上检查 'my value' 或 'my other value')。

```java
FilterList list = new FilterList(FilterList.Operator.MUST_PASS_ONE);
SingleColumnValueFilter filter1 = new SingleColumnValueFilter(
  cf,
  column,
  CompareOperator.EQUAL,
  Bytes.toBytes("my value")
  );
list.add(filter1);
SingleColumnValueFilter filter2 = new SingleColumnValueFilter(
  cf,
  column,
  CompareOperator.EQUAL,
  Bytes.toBytes("my other value")
  );
list.add(filter2);
scan.setFilter(list);
```

## 69.2. Column Value

### 69.2.1. SingleColumnValueFilter

> A SingleColumnValueFilter (see: [https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.html](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.html)) can be used to test column values for equivalence (CompareOperaor.EQUAL), inequality (CompareOperaor.NOT_EQUAL), or ranges (e.g., CompareOperaor.GREATER). The following is an example of testing equivalence of a column to a String value "my value"…​

SingleColumnValueFilter 可以用来测试列值是否相等(CompareOperaor.EQUAL)、不等(CompareOperaor.NOT_EQUAL)或范围(如CompareOperaor.GREATER)。

```java
SingleColumnValueFilter filter = new SingleColumnValueFilter(
  cf,
  column,
  CompareOperaor.EQUAL,
  Bytes.toBytes("my value")
  );
scan.setFilter(filter);
```






## 69.5. RowKey

### 69.5.1. RowFilter

> It is generally a better idea to use the startRow/stopRow methods on Scan for row selection, however [RowFilter](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/RowFilter.html) can also be used.

**在 `Scan` 上使用 `startRow/stopRow` 来选择行。也可以使用 `RowFilter`**。

> You can supplement a scan (both bounded and unbounded) with RowFilter constructed from [BinaryComponentComparator](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/BinaryComponentComparator.html) for further filtering out or filtering in rows. See [HBASE-22969](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/BinaryComponentComparator.html) for use cases and other details.

可以使用由 `BinaryComponentComparator` 构造的 `RowFilter` 来补充 scan(有界的和无界的)，以便进一步过滤出或按行过滤。