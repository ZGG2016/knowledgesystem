# 聚美笔试题 #

数据处理工程师(数仓)

## union和union all的区别 ##

	Union：对两个结果集进行并集操作，不包括重复行，同时进行默认规则的排序；

	Union在进行表链接后会筛选掉重复的记录，所以在表链接后会对所产生的结果集进行排序运算，
	删除重复的记录再返回结果。实际大部分应用中是不会产生重复的记录，最常见的是过程表与历史表UNION

	Union All：对两个结果集进行并集操作，包括重复行，不进行排序；

    如果返回的两个结果集中有重复的数据，那么返回的结果集就会包含重复的数据了。

	https://www.cnblogs.com/wcl2017/p/7078685.html

## 列数据库和行数据库的区别，哪个更适合做数据仓库 ##

	行数据库:按照行数据为基础单元进行存储的;对于磁盘来讲，这种行为与其物理结构造就的行为是比较契合的。
			在OLTP类型的应用中， 这种行为是合适的，虽然基于行的存储在数据读取的时候会存在一定的“缺陷”
			（很多时候， 并非每一行中每一列的值都需要读取出来）
	列数据库:按照一列一列的数据为单元进行存储,那么要进行一行一行的数据写入的时候,可能就需要“跳跃式”的将
		    每一行每一列的值写入到不同的区块，显然，对于磁盘结构来说，这中存储方式对数据的写入是不够友好的，
			但对数据读取友好。这种特性对读取的列上所有的值进行统计分析就比较赞了。

	https://blog.csdn.net/weinierzui/article/details/56305384
	https://www.jianshu.com/p/ad2533e5cfaa
	
![](https://i.imgur.com/56TBXWG.png)

## Liunx查看文件行数，查找文件中的"ERROR" ##

	wc命令：
		- c 统计字节数。
　　		- l 统计行数。
　　		- w 统计字数。

	grep "ERROR" filename

## 数据集市、事实表、维度表、OLAP、OLTP ##

	数据仓库保存了来自一个或者多个源数据库的历史数据和元数据。数据仓库的目的是便于将数据的报告和分析汇总到多个层次。	

	数据集市是数据仓库的一个子集，通常面向特定的业务线或者团队
	https://www.cnblogs.com/lukairui/p/7688957.html

	维度表：维度对数据分析时所用的一个特性。例如按时间来进行分析,或按产品来分析。
		产品维度表：Prod_id, Product_Name, Category, Color, Size, Price
		时间维度表：TimeKey, Season, Year, Month, Date

	数据聚合后依据某个维度生成的结果表。它的结构示例如下：
		销售事实表：Prod_id(引用产品维度表), TimeKey(引用时间维度表), SalesAmount(销售总量，以货币计), Unit(销售量)

	联机事务处理OLTP（on-line transaction processing）“：是传统的关系型数据库的主要应用，主要是基本的、日常的事务处理，例如银行交易。
	
	联机分析处理OLAP（On-Line Analytical Processing）：数据仓库系统的主要应用，支持复杂的分析操作，侧重决策支持，并且提供直观易懂的查												询结果。 
	https://www.cnblogs.com/hhandbibi/p/7118740.html

## ETL ##

	extract、transform、load

	ETL是将业务系统的数据经过抽取、清洗转换之后加载到数据仓库的过程，
	目的是将企业中的分散、零乱、标准不统一的数据整合到一起，为企业的决策提供分析依据。

	数据的抽取是从各个不同的数据源抽取到ODS(Operational Data Store，操作型数据存储)中

	https://www.cnblogs.com/yjd_hycf_space/p/7772722.html

## DML ##

	DML（data manipulation language）数据操纵语言：
		SELECT、UPDATE、INSERT、DELETE。 主要用来对数据库的数据进行一些操作。

	DDL（data definition language）数据库定义语言：
		其实就是我们在创建表的时候用到的一些sql，比如说：CREATE、ALTER、DROP等。
		DDL主要是用在定义或改变表的结构，数据类型，表之间的链接和约束等初始化工作上

	DCL（Data Control Language）数据库控制语言：
		是用来设置或更改数据库用户或角色权限的语句，包括（grant,deny,revoke等）语句
	https://www.cnblogs.com/dato/p/7049343.html

## 重复：删除查看 ##

	sql 单表/多表查询去除重复记录

	单表distinct
	
	多表group by
	
	group by 必须放在 order by 和 limit之前，不然会报错
	
	************************************************************************************
	（分组去重）
	1、查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断
	
	select * from people
	where peopleId in (select  peopleId  from  people  group  by  peopleId  having  count(peopleId) > 1)
	
	2、删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有rowid最小的记录
	delete from people
	where peopleId  in (select  peopleId  from people  group  by  peopleId   having  count(peopleId) > 1)
	and rowid not in (select min(rowid) from  people  group by peopleId  having count(peopleId )>1)
	
	3、查找表中多余的重复记录（多个字段）
	select * from vitae a
	where (a.peopleId,a.seq) in  (select peopleId,seq from vitae group by peopleId,seq  having count(*) > 1)
	
	4、删除表中多余的重复记录（多个字段），只留有rowid最小的记录
	delete from vitae a
	where (a.peopleId,a.seq) in  (select peopleId,seq from vitae group by peopleId,seq having count(*) > 1)
	and rowid not in (select min(rowid) from vitae group by peopleId,seq having count(*)>1)
	
	
	5、查找表中多余的重复记录（多个字段），不包含rowid最小的记录
	select * from vitae a
	where (a.peopleId,a.seq) in  (select peopleId,seq from vitae group by peopleId,seq having count(*) > 1)
	and rowid not in (select min(rowid) from vitae group by peopleId,seq having count(*)>1)

	https://www.cnblogs.com/ruishuang208/p/3884386.html
