# 国铁电气 #

## 推荐：数据集出现数据缺失，怎么办 ##

	删除存在缺失值的个案和缺失值插补

## 实时计算 数据延迟到达 ##

	？？

## hive怎么存TB级的数据，怎么查询 ##

	https://www.jianshu.com/p/6970c47eec5c

## hdfs为什么不适合存小文件 ##

	在HDFS中，namenode将文件系统中的元数据存储在内存中，因此，HDFS所能存储的文件数量会受到namenode内存的限制。
	一般来说，每个文件、目录、数据块的存储信息大约占150个字节，根据当前namenode的内存空间的配置，就可以计算出大
	约能容纳多少个文件了。小于一个块大小的文件，不会占用一个块的空间。

## hive优缺点 ##

	优点：
		高可靠、高容错
			HIVE Sever采用:主备模式 
			有主有从。当主机挂掉，备机马上启动。即【高可用】单点故障。
			双MetaStore
			超时重试
		类SQL 
			类似SQL语法
			内置大量函数
		可扩展 
			自定义存储格式
			自定义函数（UDF/UDAF/UDTF）
		多接口 
			Beeline,JDBC,Thrift,Python,Rest

	缺点
		延迟较高 
		默认为M/R为执行引擎，启动有延迟

## 各种消息队列的优缺点 ##

	ActiveMQ、RabbitMQ、ZeroMQ、Kafka、MetaMQ、RocketMQ
	https://blog.csdn.net/allthesametome/article/details/47362451

## kafka如何记录（存储）数据 ##

	（1）假设实验环境中Kafka集群只有一个broker，xxx/message-folder为数据文件存储根目录
		创建2个topic名称分别为report_push、launch_info, partitions数量都为partitions=4 
	存储路径和目录规则为： 
	xxx/message-folder
	
	  |--report_push-0
	  |--report_push-1
	  |--report_push-2
	  |--report_push-3
	  |--launch_info-0
	  |--launch_info-1
	  |--launch_info-2
	  |--launch_info-3

	在Kafka文件存储中，同一个topic下有多个不同partition，每个partition为一个目录，partiton命名
	规则为topic名称+有序序号，第一个partiton序号从0开始，序号最大值为partitions数量减1。

	（2）每个partion(目录)相当于一个巨型文件被平均分配到多个大小相等segment(段)数据文件中。但每个段
	segment file消息数量不一定相等，这种特性方便old segment file快速被删除。

![](https://i.imgur.com/lKmWjeL.png)

	（3）segment file组成：由2大部分组成，分别为index file和data file，此2个文件一一对应，成对出现，
		后缀”.index”和“.log”分别表示为segment索引文件、数据文件. 

![](https://i.imgur.com/iCvJH7F.png)

	（4）以上述图2中一对segment file文件为例，说明segment中index<—->data file对应关系物理结构如下： 
		说明：index中的1,0。对应log中的文件个数和offset 

![](https://i.imgur.com/aTY8Zuy.png)

	https://blog.csdn.net/silentwolfyh/article/details/55095146