# Hadoop伪分布式环境搭建

### 单机与伪分布的区别

  	单机：在一台单机上运行，没有分布式文件系统（hdfs），而是直接读写本地操作系统的文件系统。（只用来执行程序）
  	伪分布:也是在一台单机上运行，但用不同的Java进程模仿分布式运行中的各类结点。

### 单机环境搭建

(1)改主机名

(2)主机名和IP绑定

(3)关防火墙

(4)配置SSH

(5)部署软件

分别下载、解压、重命名jdk、hadoop

    对jdk:     tar -zxvf  jdk-8u121-linux-x64.tar.gz
               mv  jdk1.8.0_121  jdk
    对hadoop:  tar -zxvf hadoop-2.7.3.tar.gz
    				   mv hadoop-2.7.3 hadoop
设置环境变量

    vi /etc/profile
    export JAVA_HOME=/usr/local/jdk
    export HADOOP_HOME=/usr/local/hadoop
    export PATH=.:$HADOOP_HOME/bin:$JAVA_HOME/bin:$PATH
    source /etc/profile
    验证：java -version
          hadoop version

(6)配置宿主机hosts文件（使宿主机和虚拟机系统可以相互ping通）

C:\Windows\System32\drivers\etc\hosts目录下，添加如下内容：

  192.168.0.6  test
  （IP地址  主机名）

保存

### 伪分布环境搭建

(1)改主机名

    执行命令：vi  /etc/hostname
    保存退出（:wq）
       验证：重启：reboot
    执行命令：hostname

(2)主机名和IP绑定

    执行命令：ifconfig  获取IP地址ping
    执行命令：vi /etc/hosts，增加一行内容：IP地址  主机名。
    保存退出（:wq）
    验证：执行命令ping 主机名

(3)关防火墙

    执行命令：systemctl stop firewalld.service
    验证：firewall-cmd --state
    禁止firewall开机启动：systemctl disable firewalld.service
    （安装rz\sz: yum install lrzsz ）

(4)配置SSH

    在/root目录下执行：ssh-keygen -t rsa(设置ssh的密钥和密钥的存放路径。 路径为~/.ssh下。)
    进入到.ssh目录，执行如下命令：cp id_rsa.pub  authorized_keys(将公钥放到authorized_keys里)

(5)部署软件

分别下载、解压、重命名jdk、hadoop

    对jdk:    tar -zxvf  jdk-8u121-linux-x64.tar.gz
              mv  jdk1.8.0_121  jdk
    对hadoop: tar -zxvf hadoop-2.7.3.tar.gz
    				  mv hadoop-2.7.3 hadoop
    出现gzip: stdin: not in gzip format：先重命名文件

设置环境变量

    vi /etc/profile
    export JAVA_HOME=/usr/local/jdk
    export HADOOP_HOME=/usr/local/hadoop
    export PATH=.:$HADOOP_HOME/bin:$JAVA_HOME/bin:$PATH
    使其生效：source /etc/profile
    验证：java -version

(6)配置hadoop配置文件

在/usr/local/hadoop/etc/hadoop目录下,将slaves中的localhost换成自己的主机名,并
分别配置如下文件:

![1](https://s1.ax1x.com/2020/05/31/t1Ozzn.png)

![2](https://s1.ax1x.com/2020/05/31/t1XpMq.png)

(7)格式化并启动

    bin/hdfs namenode -format
    sbin/start-all.sh

(8)配置宿主机hosts文件（使宿主机和虚拟机系统可以相互ping通）

C:\Windows\System32\drivers\etc\hosts目录下,添加如下内容：

    192.168.0.6  test
    （IP地址  主机名）
    保存
